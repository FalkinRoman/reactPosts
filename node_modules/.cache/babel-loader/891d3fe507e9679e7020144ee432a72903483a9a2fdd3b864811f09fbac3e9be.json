{"ast":null,"code":"import React,{useEffect,useState}from'react';import MyInput from'./UI/input/MyInput';import MyTextarea from'./UI/textarea/MyTextarea';import MyButton from'./UI/button/MyButton';import{FormService}from'../API/FormService';import{useFetching}from'../hook/useFetching';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FormContact=()=>{const[name,setName]=useState('');const[nameDirty,setNameDirty]=useState(false);const[nameError,setNameError]=useState('Имя не может быть пустым');const[email,setEmail]=useState('');const[emailDirty,setEmailDirty]=useState(false);const[emailError,setEmailError]=useState('email не может быть пустым');const[comment,setComment]=useState('');const[validForm,setValidForm]=useState(false);const[fetchForm,FormLoading,formError]=useFetching(async()=>{const formData={name,email,comment};await FormService.sendFormToTelegram(formData);});useEffect(()=>{if(nameError||emailError){setValidForm(false);}else{setValidForm(true);}},[nameError,emailError]);//Валидация для имени\nconst nameHandler=e=>{setName(e.target.value);if(e.target.value.length<3||e.target.value.length>20){setNameError(\"Поле имя должно быть длинеее 3 и меньше 20\");if(!e.target.value){setNameError('Имя не может быть пустым');}}else{setNameError('');}};//Валидация для email\nconst emailHandler=e=>{setEmail(e.target.value);const re=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!re.test(String(e.target.value).toLowerCase())){setEmailError('Некоректный email');}else{setEmailError('');}};//При смене фокуса с поля инпут \nconst blurHandler=e=>{switch(e.target.name){case'name':setNameDirty(true);break;case'email':setEmailDirty(true);break;}};return/*#__PURE__*/_jsxs(\"form\",{className:\"form_contact\",children:[nameDirty&&nameError&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:nameError}),/*#__PURE__*/_jsx(MyInput,{onChange:e=>nameHandler(e),onBlur:e=>blurHandler(e),value:name,name:\"name\",type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\"}),emailDirty&&emailError&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:emailError}),/*#__PURE__*/_jsx(MyInput,{onChange:e=>emailHandler(e),onBlur:e=>blurHandler(e),value:email,name:\"email\",type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(MyTextarea,{value:comment,onChange:e=>setComment(e.target.value),name:\"comment\",type:\"text\",placeholder:\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex_end\",children:/*#__PURE__*/_jsx(MyButton,{onClick:fetchForm,disabled:!validForm,type:\"submit\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})})]});};export default FormContact;","map":{"version":3,"names":["React","useEffect","useState","MyInput","MyTextarea","MyButton","FormService","useFetching","jsx","_jsx","jsxs","_jsxs","FormContact","name","setName","nameDirty","setNameDirty","nameError","setNameError","email","setEmail","emailDirty","setEmailDirty","emailError","setEmailError","comment","setComment","validForm","setValidForm","fetchForm","FormLoading","formError","formData","sendFormToTelegram","nameHandler","e","target","value","length","emailHandler","re","test","String","toLowerCase","blurHandler","className","children","style","color","onChange","onBlur","type","placeholder","onClick","disabled"],"sources":["/Users/falkinroman/Desktop/my-app/reactPosts/src/components/FormContact.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport MyInput from './UI/input/MyInput';\nimport MyTextarea from './UI/textarea/MyTextarea';\nimport MyButton from './UI/button/MyButton';\nimport { FormService } from '../API/FormService';\nimport { useFetching } from '../hook/useFetching';\n\nconst FormContact = () => {\n\n    const [name, setName] = useState('') \n    const [nameDirty, setNameDirty] = useState(false)\n    const [nameError, setNameError] = useState('Имя не может быть пустым')\n    const [email, setEmail] = useState('') \n    const [emailDirty, setEmailDirty] = useState(false)\n    const [emailError, setEmailError] = useState('email не может быть пустым')\n    const [comment, setComment] = useState('') \n    const [validForm, setValidForm] = useState(false)\n    const [fetchForm, FormLoading, formError] = useFetching(async () => {\n        const formData = {\n            name,\n            email,\n            comment,\n        };\n        await FormService.sendFormToTelegram(formData)\n       \n      })\n\n\n    useEffect(() => {\n        if (nameError || emailError) {\n            setValidForm(false)\n        }else {\n            setValidForm(true)\n        }\n    }, [nameError, emailError])\n\n\n    //Валидация для имени\n    const nameHandler = (e) =>{\n        setName(e.target.value)\n        if (e.target.value.length < 3 || e.target.value.length > 20) {\n            setNameError(\"Поле имя должно быть длинеее 3 и меньше 20\")\n            if(!e.target.value) {\n                setNameError('Имя не может быть пустым')\n            }\n        } else {\n            setNameError('')\n        }\n    }\n\n    //Валидация для email\n    const emailHandler = (e) => {\n        setEmail(e.target.value)\n        const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if(!re.test(String(e.target.value).toLowerCase())){\n            setEmailError('Некоректный email')\n        }else {\n            setEmailError('')\n        }\n    }\n\n\n   //При смене фокуса с поля инпут \n    const blurHandler = (e) => {\n        switch(e.target.name){\n            case 'name': \n            setNameDirty(true)\n            break\n\n            case 'email': \n            setEmailDirty(true)\n            break\n        }\n    }\n\n    \n\n\n     \n\n\n    return (\n        <form className='form_contact' >\n            {(nameDirty && nameError) && <div style={{color: \"red\"}}>{nameError}</div>}\n            <MyInput onChange={e => nameHandler(e)} onBlur={e => blurHandler(e)} value={name}  name=\"name\" type=\"text\" placeholder=\"Имя\" />\n            {(emailDirty && emailError) && <div style={{color: \"red\"}}>{emailError}</div>}\n            <MyInput onChange={e => emailHandler(e)} onBlur={e => blurHandler(e)} value={email}  name=\"email\" type=\"email\" placeholder=\"Email\" />\n            <MyTextarea value={comment} onChange = {(e)=> setComment(e.target.value)} name=\"comment\" type=\"text\" placeholder=\"Комментарий\" />\n            <div className='flex flex_end'>\n                <MyButton onClick={fetchForm} disabled={!validForm} type=\"submit\">Отправить</MyButton>\n            </div>\n        </form>\n    );\n};\n\nexport default FormContact;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}